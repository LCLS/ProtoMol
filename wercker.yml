box: wercker/default

build:
  steps:
    - script:
        name: update package list
        code: sudo apt-get update
    - script:
        name: install requirements
        code: |
            sudo apt-get install build-essential
            sudo apt-get install cmake
            sudo apt-get install subversion
            sudo apt-get install liblapack-dev
    - script:
        name: setup build folder
        code: mkdir build
    - script:
        name: configure build
        code: |
            cd build
            cmake .. -DBUILD_LAPACK_TYPE=lapack
    - script:
        name: build package
        code: |
            cd build
            make
    - script:
        name: download tests
        code: svn co https://svn.code.sf.net/p/protomol/svn/trunk/test
    - script:
        name: copy executable
        code: cp build/ProtoMol test/
    - script:
        name: run tests
        code: |
            cd test
            python test.py
